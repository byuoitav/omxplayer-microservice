<html>

<head>
	<title>Stream Control</title>
	<style>
		@media only screen and (orientation: landscape) {
			.stream-container {
				justify-content: space-evenly;
				display: flex;
				align-items: center;
				flex-wrap: wrap;
				overflow: visible;
				align-content: space-evenly;
				margin-top: -30px;
			}

			.stream {
				width: 26vw;
				height: 130px;

				margin-top: 40px;
			}

			.text {
				font-size: 2em;
				line-height: .5;
			}

			.selected {
				width: 26vw;
				height: 130px;

				margin-top: 40px;
				border-width: medium;
			}
		}

		@media only screen and (orientation: portrait) {
			.stream-container {
				justify-content: space-evenly;
				display: flex;
				align-items: center;
				flex-wrap: wrap;
				overflow: visible;
				align-content: space-evenly;
			}

			.stream {
				width: 37vw;
				height: 12vh;
				margin-top: 40px;
			}

			.text {
				font-size: 2.7em;
				line-height: .5;
			}

			.selected {
				width: 37vw;
				height: 12vh;

				margin-top: 40px;
				border-width: medium;
			}
		}
	</style>

	<script>
		let CurrStream = {{.CurrStreamURL}}
		function selectStream(name, url) {
			console.log(CurrStream)
			const Http = new XMLHttpRequest();
			url = "http://localhost:8032/stream/" + url;
			Http.open("GET", url);
			Http.send();
			Http.onreadystatechange = (e) => {
				console.log(Http.responseText)
			}
			setCurrStream(name)
			console.log(CurrStream)
		}

		function setCurrStream(name) {
			CurrStream = name;
			var selected = document.querySelectorAll(".selected")
			for (i = 0; i < selected.length; i++) {
				selected[i].classList.remove("selected");
				selected[i].classList.add("stream");
			}
			document.getElementById(name).classList.add("selected");
			document.getElementById(name).classList.remove("stream");
		}
	</script>
</head>

<body>
	<div class="stream-container">
		{{range .Streams}}
		{{if eq $.CurrStreamURL .Name}}
		<button id={{.Name}} class="selected" onclick="selectStream({{.Name}}, {{.URL}})">
			<div class="text">
				<p>{{.Name}}/{{.Selected}}</p>
			</div>
		</button>
		{{else}}
		<button id={{.Name}} class="stream" onclick="selectStream({{.Name}}, {{.URL}})">
			<div class="text">
				<p>{{.Name}}/{{.Selected}}</p>
			</div>
		</button>
		{{end}}
		{{end}}
	</div>
</body>

</html>
